{
  "version": "6",
  "dialect": "sqlite",
  "id": "6e74413d-cc69-400f-b6bd-4fb626bdec6e",
  "prevId": "4e456f1b-ba57-4b19-b118-12ad6400796e",
  "tables": {
    "merchant_payments": {
      "name": "merchant_payments",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "transaction_id": {
          "name": "transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "payment_method_id": {
          "name": "payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "payment_type": {
          "name": "payment_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "qr_code_id": {
          "name": "qr_code_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "nfc_nonce": {
          "name": "nfc_nonce",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tip_amount": {
          "name": "tip_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "completed_at": {
          "name": "completed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "merchant_payments_transaction_id_unique": {
          "name": "merchant_payments_transaction_id_unique",
          "columns": ["transaction_id"],
          "isUnique": true
        },
        "merchant_payments_merchant_id_idx": {
          "name": "merchant_payments_merchant_id_idx",
          "columns": ["merchant_id"],
          "isUnique": false
        },
        "merchant_payments_merchant_created_idx": {
          "name": "merchant_payments_merchant_created_idx",
          "columns": ["merchant_id", "created_at"],
          "isUnique": false
        },
        "merchant_payments_payment_type_idx": {
          "name": "merchant_payments_payment_type_idx",
          "columns": ["payment_type"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "merchant_payments_transaction_id_transactions_id_fk": {
          "name": "merchant_payments_transaction_id_transactions_id_fk",
          "tableFrom": "merchant_payments",
          "tableTo": "transactions",
          "columnsFrom": ["transaction_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "merchant_payments_merchant_id_merchants_id_fk": {
          "name": "merchant_payments_merchant_id_merchants_id_fk",
          "tableFrom": "merchant_payments",
          "tableTo": "merchants",
          "columnsFrom": ["merchant_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "merchant_payments_payment_method_id_payment_methods_id_fk": {
          "name": "merchant_payments_payment_method_id_payment_methods_id_fk",
          "tableFrom": "merchant_payments",
          "tableTo": "payment_methods",
          "columnsFrom": ["payment_method_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "merchants": {
      "name": "merchants",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "business_name": {
          "name": "business_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tap2_id": {
          "name": "tap2_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "business_type": {
          "name": "business_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "merchants_tap2_id_unique": {
          "name": "merchants_tap2_id_unique",
          "columns": ["tap2_id"],
          "isUnique": true
        },
        "merchants_tap2_id_idx": {
          "name": "merchants_tap2_id_idx",
          "columns": ["tap2_id"],
          "isUnique": false
        },
        "merchants_is_active_idx": {
          "name": "merchants_is_active_idx",
          "columns": ["is_active"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "p2p_transfers": {
      "name": "p2p_transfers",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "transaction_id": {
          "name": "transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sender_id": {
          "name": "sender_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "recipient_id": {
          "name": "recipient_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'PENDING'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "p2p_transfers_transaction_id_unique": {
          "name": "p2p_transfers_transaction_id_unique",
          "columns": ["transaction_id"],
          "isUnique": true
        },
        "p2p_transfers_status_idx": {
          "name": "p2p_transfers_status_idx",
          "columns": ["status"],
          "isUnique": false
        },
        "p2p_transfers_expires_at_idx": {
          "name": "p2p_transfers_expires_at_idx",
          "columns": ["expires_at"],
          "isUnique": false
        },
        "p2p_transfers_sender_created_idx": {
          "name": "p2p_transfers_sender_created_idx",
          "columns": ["sender_id", "created_at"],
          "isUnique": false
        },
        "p2p_transfers_recipient_created_idx": {
          "name": "p2p_transfers_recipient_created_idx",
          "columns": ["recipient_id", "created_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "p2p_transfers_transaction_id_transactions_id_fk": {
          "name": "p2p_transfers_transaction_id_transactions_id_fk",
          "tableFrom": "p2p_transfers",
          "tableTo": "transactions",
          "columnsFrom": ["transaction_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "p2p_transfers_sender_id_users_id_fk": {
          "name": "p2p_transfers_sender_id_users_id_fk",
          "tableFrom": "p2p_transfers",
          "tableTo": "users",
          "columnsFrom": ["sender_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "p2p_transfers_recipient_id_users_id_fk": {
          "name": "p2p_transfers_recipient_id_users_id_fk",
          "tableFrom": "p2p_transfers",
          "tableTo": "users",
          "columnsFrom": ["recipient_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "payment_methods": {
      "name": "payment_methods",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "provider_id": {
          "name": "provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_default": {
          "name": "is_default",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "last_four": {
          "name": "last_four",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "expiry_month": {
          "name": "expiry_month",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "expiry_year": {
          "name": "expiry_year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "payment_methods_user_id_idx": {
          "name": "payment_methods_user_id_idx",
          "columns": ["user_id"],
          "isUnique": false
        },
        "payment_methods_user_type_idx": {
          "name": "payment_methods_user_type_idx",
          "columns": ["user_id", "type"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "payment_methods_user_id_users_id_fk": {
          "name": "payment_methods_user_id_users_id_fk",
          "tableFrom": "payment_methods",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "rewards": {
      "name": "rewards",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "points": {
          "name": "points",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "transaction_id": {
          "name": "transaction_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "rewards_user_id_idx": {
          "name": "rewards_user_id_idx",
          "columns": ["user_id"],
          "isUnique": false
        },
        "rewards_user_expires_idx": {
          "name": "rewards_user_expires_idx",
          "columns": ["user_id", "expires_at"],
          "isUnique": false
        },
        "rewards_merchant_id_idx": {
          "name": "rewards_merchant_id_idx",
          "columns": ["merchant_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "rewards_user_id_users_id_fk": {
          "name": "rewards_user_id_users_id_fk",
          "tableFrom": "rewards",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "rewards_merchant_id_merchants_id_fk": {
          "name": "rewards_merchant_id_merchants_id_fk",
          "tableFrom": "rewards",
          "tableTo": "merchants",
          "columnsFrom": ["merchant_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "rewards_transaction_id_transactions_id_fk": {
          "name": "rewards_transaction_id_transactions_id_fk",
          "tableFrom": "rewards",
          "tableTo": "transactions",
          "columnsFrom": ["transaction_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "transactions": {
      "name": "transactions",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "wallet_id": {
          "name": "wallet_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'PENDING'"
        },
        "reference_id": {
          "name": "reference_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "transactions_wallet_id_idx": {
          "name": "transactions_wallet_id_idx",
          "columns": ["wallet_id"],
          "isUnique": false
        },
        "transactions_status_idx": {
          "name": "transactions_status_idx",
          "columns": ["status"],
          "isUnique": false
        },
        "transactions_type_idx": {
          "name": "transactions_type_idx",
          "columns": ["type"],
          "isUnique": false
        },
        "transactions_created_at_idx": {
          "name": "transactions_created_at_idx",
          "columns": ["created_at"],
          "isUnique": false
        },
        "transactions_wallet_created_idx": {
          "name": "transactions_wallet_created_idx",
          "columns": ["wallet_id", "created_at"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "transactions_wallet_id_wallets_id_fk": {
          "name": "transactions_wallet_id_wallets_id_fk",
          "tableFrom": "transactions",
          "tableTo": "wallets",
          "columnsFrom": ["wallet_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "auth0_id": {
          "name": "auth0_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "kyc_verified": {
          "name": "kyc_verified",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "kyc_verified_at": {
          "name": "kyc_verified_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "users_email_unique": {
          "name": "users_email_unique",
          "columns": ["email"],
          "isUnique": true
        },
        "users_phone_unique": {
          "name": "users_phone_unique",
          "columns": ["phone"],
          "isUnique": true
        },
        "users_auth0_id_unique": {
          "name": "users_auth0_id_unique",
          "columns": ["auth0_id"],
          "isUnique": true
        },
        "users_email_idx": {
          "name": "users_email_idx",
          "columns": ["email"],
          "isUnique": false
        },
        "users_phone_idx": {
          "name": "users_phone_idx",
          "columns": ["phone"],
          "isUnique": false
        },
        "users_auth0_id_idx": {
          "name": "users_auth0_id_idx",
          "columns": ["auth0_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "wallets": {
      "name": "wallets",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "balance": {
          "name": "balance",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'USD'"
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(strftime('%s', 'now'))"
        }
      },
      "indexes": {
        "wallets_user_id_unique": {
          "name": "wallets_user_id_unique",
          "columns": ["user_id"],
          "isUnique": true
        },
        "wallets_user_id_idx": {
          "name": "wallets_user_id_idx",
          "columns": ["user_id"],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "wallets_user_id_users_id_fk": {
          "name": "wallets_user_id_users_id_fk",
          "tableFrom": "wallets",
          "tableTo": "users",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}
